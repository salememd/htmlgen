<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">




<html xml:lang="en-ly" lang="en-ly" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>Libya Guide</title>

    <link type="text/css" rel="stylesheet" href="js/jui/jui-theme.css?v=1.1" />
    <link type="text/css" rel="stylesheet" href="css/style.css?v=1.1" />
    <link type="text/css" rel="stylesheet" href="css/en.css?v=1.1" />

    <script src="js/jui/jui-core.js?v=1.1" type="text/javascript"></script>
    <style>
        .tree li {
            list-style: none;
        }
    </style>
    <script type="text/javascript">
        /* global app, webapp */

        var webapp = {

        };
        app.main = function() {
            new webapp.Login();
        };
    </script>

    <script src="js/jui/jui-components.js?v=1.1" type="text/javascript"></script>
    <script src="js/jui/jui-window.js?v=1.1" type="text/javascript"></script>
    <script src="js/jui/extra-components/jui-components.js?v=1.1" type="text/javascript"></script>

    <script>
        (function() {


            jUI.Tree = function(pa) {
                if (pa && pa.__loading__) return;
                var newPa = app.$(app.clone(pa), {
                    className: "tree",
                    visible: true
                }, false);
                var el = document.createElement("ul");

                jUI.Layout.call(this, newPa, el);
            };

            (function() {
                jUI.Tree.prototype = new jUI.Layout({
                    __loading__: true
                });
                jUI.Tree.prototype.constructor = jUI.Tree;


                // Overriden Function Start ===========================================

                jUI.Tree.prototype._initProp = function(pa) {
                    jUI.Layout.prototype._initProp.call(this, pa);
                    this.__V.Tree = {
                        Nodes: [],
                        selected: []
                    };

                };

                jUI.Tree.prototype.leafs = function(nodes) {

                        this.__V.Tree.Nodes = nodes;
                  

                    for (var i = 0; i < nodes.length; i++) {

                        nodes[i]._setTree(this);

                        this.__V.el.appendChild(nodes[i].__V.el);


                    }


                };




                jUI.Tree.prototype._getNode = function(checkObj, t = this.__V.Tree.Nodes) {
                    for (var j = 0; j < t.length; j++) {
                        a = this._getNode(checkObj, t[j].__V.Node.childs);
                        if (t[j].__V.Node.selectDom == checkObj) {
                            this.node = t[j];
                            break;
                        }
                        if (t[j].__V.Node.expandDom == checkObj) {
                            this.node = t[j];
                            break;
                        }
                    }
                    return this.node;
                };




                jUI.Tree.prototype.selectNode = function(node) {
                    var t = node.__V.Node.childs;

                    if (t.length == 0) {
                        this.__V.Tree.selected.push(node)
                        return;
                    }
                    for (var i = 0; i < t.length; i++) {
                        if (t[i].__V.Node.selectDom.checked == false) {

                            this.selectNode(t[i]);

                            var check = false;
                            for (var j = 0; j < this.__V.Tree.selected.length; j++)
                                if (this.__V.Tree.selected[j] == t[i])
                                    check = true;

                            if (t[i].__V.Node.childs.length == 0 && check == false)
                                this.__V.Tree.selected.push(t[i])

                            t[i].__V.Node.selectDom.checked = true;
                        }
                    }

                };


                jUI.Tree.prototype.unSelectNode = function(node) {
                    var t = node.__V.Node.childs;
                    if (t.length == 0) {
                        for (var j = 0; j < this.__V.Tree.selected.length; j++)
                            if (this.__V.Tree.selected[j] == node)
                                this.__V.Tree.selected.splice(j, 1);
                        return;
                    }
                    for (var i = 0; i < t.length; i++) {

                        if (t[i].__V.Node.selectDom.checked == true) {
                            this.unSelectNode(t[i]);
                            for (var j = 0; j < this.__V.Tree.selected.length; j++)
                                if (this.__V.Tree.selected[j] == t[i])
                                    this.__V.Tree.selected.splice(j, 1);

                            t[i].__V.Node.selectDom.checked = false;


                        }


                    }


                };


                jUI.Tree.prototype.getTreeLeafs = function() {
                    return this.__V.Tree.Nodes;
                };

                jUI.Tree.prototype.getSelectedNodes = function() {
                    return this.__V.Tree.selected;
                };



                app.$(jUI.Tree.prototype.__props = app.clone(jUI.Tree.prototype.__props), {
                    leafs: "leafs"

                });

                jUI.Tree.prototype.__events = jUI.Tree.prototype.__events.clone().concat([]);

            })();
        })();



        /* 
		
		
		
		jUI Tree node 
		
		
		
		
		
		*/
	
		
		
		
        (function() {
            jUI.Tree.Node = function(pa) {
                if (pa && pa.__loading__) return;
                var newPa = app.$(app.clone(pa), {
                    className: "treenode",
                }, false);
                var el = document.createElement("li");

                jUI.Layout.call(this, newPa, el);
            };

            (function() {
                jUI.Tree.Node.prototype = new jUI.Layout({
                    __loading__: true
                });
                jUI.Tree.Node.prototype.constructor = jUI.Tree.Node;

                jUI.Tree.Node.prototype._initProp = function(pa) {
                    jUI.Layout.prototype._initProp.call(this, pa);
                    this.__V.Node = {
                        text: new jUI.Label({
                            classModifier: "nodetext",
                            text: "",
                            layout: jUI.Layout.ltFollowVer,
                            forId: ""
                        }),
                        isExpanded: false,
                        isSelectable: false,
                        childs: [],
                        treeObj: null,

                    };
					
                    this.__V.el.style.float = "";
                    this.__V.el.style.display = "";
                    this.__V.el.style.position = "";


                };


                jUI.Tree.Node.prototype.isExpanded = function(isExpanded) {
                    this.__V.Node.isExpanded = isExpanded;

                }

				
                jUI.Tree.Node.prototype.setText = function(text) {
                    this.__V.Node.text.setText(text);
                    this.__V.el.appendChild(this.__V.Node.text.__V.el);


                }



                jUI.Tree.Node.prototype._setTree = function(tree) {
                    this.__V.Node.treeObj = tree;
                    for (var j = 0; j < this.__V.Node.childs.length; j++) {
                        this.__V.Node.childs[j]._setTree(tree);
                    }

                };
				
                jUI.Tree.Node.prototype.setChilds = function(a) {
                    if (a.length == 0) {
                        return;
                    }
                    this.__V.Node.childs = a;
                    var subnode = document.createElement("ul");
                    var toggle = document.createElement("input");
                    toggle.setAttribute("type", "checkbox");
                    var oj = this;

                    toggle.addEventListener("change", function() {
                        var obj = oj.__V.Node.treeObj;

                        var checkObj = this;
                        if (this.checked == true) {
                            obj._getNode(checkObj).__V.Node.subnodeDom.style.display = "block";

                        } else {
                            obj._getNode(checkObj).__V.Node.subnodeDom.style.display = "none";
                        }

                    });

                    if (this.__V.Node.isExpanded == true) {
                        toggle.checked = true;
                    } else {
                        subnode.style.display = "none";
                    }

                    var checkView = document.createElement("lable");
                    this.__V.el.appendChild(toggle);

                    this.__V.el.appendChild(checkView);
                    for (var i = 0; i < a.length; i++) {
                        subnode.appendChild(a[i].__V.el);

                    }


                    this.__V.el.appendChild(subnode);

                    this.__V.Node.subnodeDom = subnode;
                    this.__V.Node.expandDom = toggle;
                }



                jUI.Tree.Node.prototype.isSelectable = function(b) {

                    if (b == true) {
                        this.__V.Node.isSelectable = true;
                        var select = document.createElement("input");
                        select.setAttribute("type", "checkbox");
                        this.__V.Node.selectDom = select;
                        var oj = this;

                        select.addEventListener("change", function() {
                            var checkObj = this
                            var obj = oj.__V.Node.treeObj;

                            var seleceted = obj._getNode(checkObj);
                            if (this.checked == true) {
                                obj.selectNode(seleceted);
                            } else {
                                obj.unSelectNode(seleceted);
                            }

                            /**** DEBUG ****/
                            var s = "";
                            obj.__V.Tree.selected.forEach(function(item) {
                                s += item.__V.Node.text.__V.Label.text + ", ";
                            });
                            alert("Selected:" + s);
                            /**************/
                        });
                        this.__V.el.appendChild(select);

                    }

                }
				
				

                app.$(jUI.Tree.Node.prototype.__props = app.clone(jUI.Tree.Node.prototype.__props), {
                    text: "setText",
                    isExpanded: "isExpanded",
                    isSelectable: "isSelectable",
                    childs: "setChilds",
                });

                jUI.Tree.Node.prototype.__events = jUI.Tree.Node.prototype.__events.clone().concat([

                ]);


            })();
        })();




        /* global app, webapp, jUI */


        (function() {
            webapp.Login = function() {
                jUI.ViewController.call(this);
            };
            webapp.Login.prototype = new jUI.ViewController({
                __loading__: true
            });
            webapp.Login.prototype.constructor = webapp.Login;
            webapp.Login.prototype._initController = function() {
                this.viewDidLoad = function() {
                    this.view.show();

                };

            };



            webapp.Login.prototype._initView = function() {

                return new jUI.Window({
                    width: "100%",
                    height: "100%",
                    children: [

                        new jUI.Tree({
                            leafs: [
                                new jUI.Tree.Node({
                                    text: "a-f",
                                    isSelectable: true,
									isExpanded: true,
                                    childs: [
                                        new jUI.Tree.Node({
                                            text: "a",
                                            isSelectable: true,
                                            isExpanded: true,
                                            childs: []
                                        }),
                                        new jUI.Tree.Node({
                                            text: "b",
                                            isSelectable: true,
                                            childs: []
                                        }),
                                        new jUI.Tree.Node({
                                            text: "c-f",
                                            isSelectable: true,
                                            childs: [new jUI.Tree.Node({
                                                text: "c",
                                                isSelectable: true,
                                                childs: []
                                            }), new jUI.Tree.Node({
                                                text: "d - f",
                                                isSelectable: true,
                                                childs: [
                                                    new jUI.Tree.Node({
                                                        text: "d",
                                                        isSelectable: true,
                                                        childs: []
                                                    }),
                                                    new jUI.Tree.Node({
                                                        text: "e",
                                                        isSelectable: true,
                                                        childs: []
                                                    }),
                                                    new jUI.Tree.Node({
                                                        text: "f",
                                                        isSelectable: true,
                                                        childs: []
                                                    }),
                                                ]
                                            }), ]
                                        })
                                    ]
                                }),
                                new jUI.Tree.Node({
                                    text: "g",
                                    isSelectable: true,
                                    isExpanded: true,
                                    childs: []
                                }),
                                new jUI.Tree.Node({
                                    text: "h",
                                    isSelectable: true,
                                    isExpanded: true,
                                    childs: []
                                }),
                                new jUI.Tree.Node({
                                    text: "i - n",
                                    isSelectable: true,
                                    childs: [
                                        new jUI.Tree.Node({
                                            text: "i",
                                            isSelectable: true,
                                            isExpanded: true,
                                            childs: []
                                        }),
                                        new jUI.Tree.Node({
                                            text: "j",
                                            isSelectable: true,
                                            isExpanded: true,
                                            childs: []
                                        }),
                                        new jUI.Tree.Node({
                                            text: "k - m",
                                            isSelectable: true,
                                            isExpanded: true,
                                            childs: [new jUI.Tree.Node({
                                                text: "k",
                                                isSelectable: true,
                                                isExpanded: true,
                                                childs: []
                                            }), new jUI.Tree.Node({
                                                text: "l",
                                                isSelectable: true,
                                                isExpanded: true,
                                                childs: []
                                            }), new jUI.Tree.Node({
                                                text: "m",
                                                isSelectable: true,
                                                isExpanded: true,
                                                childs: []
                                            })]
                                        }),
                                        new jUI.Tree.Node({
                                            text: "n",
                                            isSelectable: true,
                                            isExpanded: true,
                                            childs: []
                                        })

                                    ]
                                })




                            ]



                        })


                    ]
                });
            };
        })();
    </script>


</head>

<body onload="void(0);">
</body>

</html>