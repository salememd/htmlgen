<html xml:lang="en-ly" lang="en-ly" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>Libya Guide</title>

    <link type="text/css" rel="stylesheet" href="js/jui/jui-theme.css?v=1.1" />
    <link type="text/css" rel="stylesheet" href="css/style.css?v=1.1" />
    <link type="text/css" rel="stylesheet" href="css/en.css?v=1.1" />

    <script src="js/jui/jui-core.js?v=1.1" type="text/javascript"></script>
    <style>
        .tree li {
            list-style: none;
        }
    </style>
    <script type="text/javascript">
        /* global app, webapp */

        var webapp = {

        };
        app.main = function() {
            new webapp.Login();
        };
    </script>

    <script src="js/jui/jui-icons.js?v=1.1" type="text/javascript"></script>
    <script src="js/jui/jui-components.js?v=1.1" type="text/javascript"></script>
    <script src="js/jui/jui-window.js?v=1.1" type="text/javascript"></script>
    <script src="js/jui/extra-components/jui-components.js?v=1.1" type="text/javascript"></script>
    <script src="js/jui/jui-data.js?v=1.1" type="text/javascript"></script>

    <script>
        (function() {


            jUI.Tree = function(pa) {
                if (pa && pa.__loading__) return;
                var newPa = app.$(app.clone(pa), {
                    className: "tree",
                    visible: true
                }, false);
                var el = document.createElement("ul");

                jUI.Layout.call(this, newPa, el);
            };

            (function() {
                jUI.Tree.prototype = new jUI.Layout({
                    __loading__: true
                });
                jUI.Tree.prototype.constructor = jUI.Tree;


                // Overriden Function Start ===========================================

                jUI.Tree.prototype._initProp = function(pa) {
                    jUI.Layout.prototype._initProp.call(this, pa);
                    this.__V.Tree = {
                        rootNode: new jUI.Tree.Node({
                            text: "",
                            selectable: false,
                            children: [],
                            expanded: false,

                        })
                    }

                };

                jUI.Tree.prototype.leafs = function(nodes) {


                    this.__V.Tree.rootNode.addChild(nodes);
                    this.__V.Tree.rootNode._setExpanded(true);
                    this.__V.Tree.rootNode.__V.Node.expandDom.setVisible(false);

                    this.addChildren([this.__V.Tree.rootNode]);

                    for (var i = 0; i < nodes.length; i++) {
                        nodes[i]._setTree(this);
                    }



                };



                jUI.Tree.prototype.getTreeLeafs = function() {
                    return this.__V.Tree.rootNode.getChildren();
                };



                jUI.Tree.prototype.getSelectedNodes = function() {
                    return this.__V.Tree.rootNode._getSelectedChildren();
                };



                app.$(jUI.Tree.prototype.__props = app.clone(jUI.Tree.prototype.__props), {
                    leafs: "leafs"

                });

                jUI.Tree.prototype.__events = jUI.Tree.prototype.__events.clone().concat([
                    "onNodeSelectionChange",
                    "onViewStateChange"

                ]);

            })();
        })();



        /* 
		
		
		
		jUI Tree node 
		
		
		
		
		
		*/




        (function() {
            jUI.Tree.Node = function(pa) {
                if (pa && pa.__loading__) return;
                var newPa = app.$(app.clone(pa), {
                    className: "treenode",
                }, false);
                var el = document.createElement("li");

                jUI.Layout.call(this, newPa, el);
            };

            (function() {
                jUI.Tree.Node.prototype = new jUI.Layout({
                    __loading__: true
                });
                jUI.Tree.Node.prototype.constructor = jUI.Tree.Node;

                jUI.Tree.Node.prototype._initProp = function(pa) {
                    jUI.Layout.prototype._initProp.call(this, pa);
                    this.__V.Node = {
                        text: new jUI.Label({
                            classModifier: "nodetext",
                            text: "",
                            layout: jUI.Layout.ltFollowHor,
                            forId: ""
                        }),
						
                        isExpanded: false,
						
                        isSelectable: false,
						
                        children: [],
                        treeObj: null,
						
                        expandDom: new jUI.Checkbox({
                            checked: false,
                            visible: false,
                            layout: jUI.Layout.ltFollowHor,
                            readOnly: false,
                            label: ""
                        }),
						
                        selectDom: new jUI.Checkbox({
                            checked: false,
                            readOnly: false,
                            visible: false,
                            layout: jUI.Layout.ltFollowHor,
                            label: ""
                        })
                    };
					
                    this.addChildren([this.__V.Node.expandDom, this.__V.Node.selectDom, this.__V.Node.text]);
                    this.setVisible(true);
                    this.setLayout(jUI.Layout.ltFollowVer);


                };


                jUI.Tree.Node.prototype.setText = function(text) {
                    this.__V.Node.text.setText(text);


                }

                jUI.Tree.Node.prototype.getText = function() {
                    return this.__V.Node.text.getText();

                }

                jUI.Tree.Node.prototype.getChildren = function() {
                    return this.__V.Node.children;

                }




                jUI.Tree.Node.prototype._getSelectedChildren = function(node = this.getChildren(), set = []) {

                    for (var i = 0; i < node.length; i++) {
                        node[i]._getSelectedChildren(node[i].getChildren(), set);
                        if (node[i].__V.Node.selectDom.getChecked() == true && node[i].getChildren().length == 0) {
                            set.push(node[i]);
                        }
                    }
                    return set;
                }



                /**
                Collapse or expand the node
				
                **/

                jUI.Tree.Node.prototype.setExpanded = function(isExpanded) {

                    if (this.__V.Node.expandDom.getChecked() != isExpanded)
                        this._setExpanded(isExpanded);
                }



                jUI.Tree.Node.prototype._setExpanded = function(isExpanded) {

                    if (this.getChildren().length > 0) {


                        if (isExpanded) {
                            this.__V.Node.expandDom.setChecked(true);

                            this.__V.Node.subnodeDom.setVisible(true);
                            this.__V.Node.isExpanded = isExpanded;


                        } else {
                            this.__V.Node.expandDom.setChecked(false);

                            this.__V.Node.subnodeDom.setVisible(false);
                            this.__V.Node.isExpanded = isExpanded;


                        }
                    }


                }


                /**
                select/unselect the node and all it's children	
				
				**/

                jUI.Tree.Node.prototype.setSelected = function(selected) {

                    if (this.__V.Node.selectDom.getChecked() != selected)
                        this._setSelected(selected)


                };


                jUI.Tree.Node.prototype._setSelected = function(selected, node = this) {

                    var t = node.getChildren();

                    if (selected) {
                        if (t.length == 0) {
                            this.__V.Node.selectDom.setChecked(true);
                            return;
                        }
                        for (var i = 0; i < t.length; i++) {
                            if (t[i].__V.Node.selectDom.getChecked() == false) {
                                this._setSelected(true, t[i]);
                                t[i].__V.Node.selectDom.setChecked(true);
                            }
                        }


                    } else {
                        if (t.length == 0) {
                            this.__V.Node.selectDom.setChecked(false);
                            return;
                        }

                        for (var i = 0; i < t.length; i++) {
                            if (t[i].__V.Node.selectDom.getChecked()) {
                                this._setSelected(false, t[i]);
                                t[i].__V.Node.selectDom.setChecked(false);

                            }

                        }
                    }

                };


                /**
                TreeView uses this method to attach it's own object with the node
				
                **/
                jUI.Tree.Node.prototype._setTree = function(tree) {

                    if (tree instanceof jUI.Tree) {

                        this.__V.Node.treeObj = tree;
                        for (var j = 0; j < this.__V.Node.children.length; j++) {
                            this.__V.Node.children[j]._setTree(tree);
                        }
                    }

                };




                // TO DO add child || multi children 
                jUI.Tree.Node.prototype.addChild = function(node) {

                    var childSet = [];

                    if (arguments.length > 1) {
                        childSet = arguments;

                    } else if (node instanceof Array) {
                        childSet = node;

                    } else if (node instanceof jUI.Tree.Node) {
                        childSet.push(node)

                    } else {
                        throw new Error("Uncomaptable");

                    }

                    if (childSet.length == 0) {
                        return;
                    }

                    for (var i = 0; i < childSet.length; i++) {
                        if (childSet[i] instanceof jUI.Tree.Node == false) {
                            throw new Error("Uncomaptable");
                        }
                    }


                    if (typeof this.__V.Node.subnodeDom !== "undefined") {
                        this.__V.Node.subnodeDom.addChildren(childSet);
                        this.__V.Node.children = this.__V.Node.children.concat(childSet);
                        return;
                    }


                    this.__V.Node.children = childSet;

                    var subnode = new jUI.Layout({
                        visible: true,
                        layout: jUI.Layout.ltFollowHor,

                    }, document.createElement("ul"));

                    var oj = this;

                    this.__V.Node.expandDom.setVisible(true);
                    this.__V.Node.expandDom.setChecked(this.__V.Node.isExpanded);
					
                    this.__V.Node.expandDom.addEvents({
                        check: function(state) {
                            oj._setExpanded(state);
                            if (oj.__V.Node.treeObj != null) 
                                oj.__V.Node.treeObj._doEvent("onViewStateChange", oj);
                        }
                    });

                    subnode.addChildren(childSet);

                    this.__V.Node.subnodeDom = subnode;


                    this.addChildren([subnode]);
					
                    this._setExpanded(this.__V.Node.isExpanded);



                }


                /**
                control whether the node can be selected or not				
				
                **/
                jUI.Tree.Node.prototype.setSelectable = function(isSelectable) {

                    if (isSelectable == true && this.__V.Node.isSelectable == false) {
                        this.__V.Node.isSelectable = true;
                        var oj = this;

                        this.__V.Node.selectDom.addEvents({
                            check: function(state) {
                                oj._setSelected(state);
                                if (oj.__V.Node.treeObj != null)
                                    oj.__V.Node.treeObj._doEvent("onNodeSelectionChange", oj);
                            }
                        });
						
                        this.__V.Node.selectDom.setVisible(true);


                    } else if (isSelectable == false && this.__V.Node.isSelectable == true) {
						this.__V.Node.selectDom.setVisible(false);
                        this.__V.Node.isSelectable = false;

                    }

                }



                app.$(jUI.Tree.Node.prototype.__props = app.clone(jUI.Tree.Node.prototype.__props), {
                    text: "setText",
                    children: "addChild",
                    expanded: "_setExpanded",
                    selectable: "setSelectable",
                });

                jUI.Tree.Node.prototype.__events = jUI.Tree.Node.prototype.__events.clone().concat([

                ]);


            })();
        })();




        /* global app, webapp, jUI */


        (function() {
            webapp.Login = function() {
                jUI.ViewController.call(this);
            };
            webapp.Login.prototype = new jUI.ViewController({
                __loading__: true
            });
            webapp.Login.prototype.constructor = webapp.Login;
            webapp.Login.prototype._initController = function() {
                this.viewDidLoad = function() {
                    this.view.show();

                };

            };



            webapp.Login.prototype._initView = function() {

                return new jUI.Window({
                    width: "100%",
                    height: "100%",
                    children: [

                        new jUI.Tree({
                            leafs: [
                                new jUI.Tree.Node({
                                    selectable: true,
                                    text: "a-f",
                                    children: [
                                        new jUI.Tree.Node({
                                            text: "a",
                                            selectable: true,
                                            children: []
                                        }),
                                        new jUI.Tree.Node({
                                            text: "b",
                                            selectable: true,
                                            children: []
                                        }),
                                        new jUI.Tree.Node({
                                            text: "c-f",
                                            selectable: true,
                                            children: [
                                                new jUI.Tree.Node({
                                                    text: "c",
                                                    selectable: true,
                                                    children: []
                                                }), new jUI.Tree.Node({
                                                    text: "d - f",
                                                    selectable: true,
                                                    children: [
                                                        new jUI.Tree.Node({
                                                            text: "d",
                                                            selectable: true,
                                                            children: []
                                                        }),
                                                        new jUI.Tree.Node({
                                                            text: "e",
                                                            selectable: true,
                                                            children: []
                                                        }),
                                                        new jUI.Tree.Node({
                                                            text: "f",
                                                            selectable: true,
                                                            children: []
                                                        }),
                                                    ]
                                                }),
                                            ],
                                            expanded: true,

                                        })
                                    ],
                                    expanded: true,

                                }),
                                new jUI.Tree.Node({
                                    text: "g",
                                    selectable: true,
                                    expanded: true,
                                    children: []
                                }),
                                new jUI.Tree.Node({
                                    text: "h",
                                    selectable: true,
                                    expanded: true,
                                    children: []
                                }),
                                new jUI.Tree.Node({
                                    text: "i - n",
                                    selectable: true,
                                    children: [
                                        new jUI.Tree.Node({
                                            text: "i",
                                            selectable: true,
                                            expanded: true,
                                            children: []
                                        }),
                                        new jUI.Tree.Node({
                                            text: "j",
                                            selectable: true,
                                            expanded: true,
                                            children: []
                                        }),
                                        new jUI.Tree.Node({
                                            text: "k - m",
                                            selectable: true,
                                            children: [
                                                new jUI.Tree.Node({
                                                    text: "k",
                                                    selectable: true,
                                                    expanded: true,
                                                    children: []
                                                }), new jUI.Tree.Node({
                                                    text: "l",
                                                    selectable: true,
                                                    expanded: true,
                                                    children: []
                                                }), new jUI.Tree.Node({
                                                    text: "m",
                                                    selectable: true,
                                                    expanded: true,
                                                    children: []
                                                })
                                            ],
                                            expanded: true,

                                        }),
                                        new jUI.Tree.Node({
                                            text: "n",
                                            selectable: true,
                                            children: []
                                        })

                                    ],
                                    expanded: true,

                                })


                            ],
                            events: {
                                onNodeSelectionChange: function(a) {
                                    alert("User onSelect event: " + a.getText());
                                },
                                onViewStateChange: function(a) {
                                    alert("User onCollaps/expand event: " + a.getText());
                                }
                            }
                        })

                    ]
                });
            };
        })();
    </script>


</head>

<body onload="void(0);">
</body>

</html>